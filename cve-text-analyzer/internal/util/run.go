package util

import (
	"os"
	"os/exec"
	"strings"
)

func Run(dir, command string, args ...string) {
	parts := strings.Split(command, " ")
	args = append(parts[1:], args...)
	Log("executing:", args, "in dir:", dir)
	cmd := exec.Command(parts[0], args...)
	cmd.Dir = dir
	cmd.Stdout = os.Stdout
	cmd.Stderr = os.Stderr
	PanicOnError(cmd.Run())
}

func RunAlways(dir, command string, args ...string) {
	LogPanics(func() {
		Run(dir, command, args...)
	})
}
